# SPDX-FileCopyrightText: Copyright (c) 2025, NVIDIA CORPORATION & AFFILIATES. All rights reserved.
# SPDX-License-Identifier: Apache-2.0

%YAML 1.2
---
# Streaming Client Demo Configuration - V4L2 SOURCE (Camera)
# This configuration is optimized for V4L2 camera capture

# Application configuration
application:
  title: Streaming Client Demo (V4L2)
  version: 1.0
  log_level: INFO

# Source: v4l2 for camera capture
source: "v4l2"

# V4L2 camera configuration
v4l2:
  device: "/dev/video0"
  width: 640
  height: 480
  frame_rate: 30
  pixel_format: "YUYV"

# Video replayer configuration (not used but kept for reference)
replayer:
  directory: "/workspace/holohub/data/endoscopy"
  basename: "surgical_video"
  frame_rate: 30
  repeat: true
  realtime: true
  count: 0

# Format converter configuration
# V4L2 outputs RGBA8888 (4 channels) after internal YUYV->RGBA conversion
format_converter:
  in_dtype: "rgba8888"         # V4L2 outputs RGBA (4 channels)
  out_dtype: "rgb888"          # Convert to RGB (3 channels), dropping alpha
  out_tensor_name: "tensor"
  scale_min: 0.0
  scale_max: 255.0
  out_channel_order: [2, 1, 0] # Convert RGB to BGR

# Streaming client settings
streaming_client:
  # Video/stream parameters - Match V4L2 camera resolution (640x480)
  width: 640
  height: 480
  fps: 30
  
  # Server connection settings
  server_ip: "127.0.0.1"
  signaling_port: 48010
  
  # Operation mode
  receive_frames: true
  send_frames: true
  
  # Frame validation
  min_non_zero_bytes: 10

# Visualization options
visualize_frames: true

# HoloViz configuration (match camera resolution)
holoviz:
  width: 640
  height: 480
  tensors:
    - name: "bgra_tensor"
      type: color
      image_format: "b8g8r8a8_unorm"  # BGRA format (4 channels)
      opacity: 1.0
      priority: 0

# Buffer pool configuration
allocator:
  block_size: 4194304    # 4MB buffer blocks
  num_blocks: 12

# Scheduler configuration
scheduler: "greedy"
