# SPDX-FileCopyrightText: Copyright (c) 2025 NVIDIA CORPORATION & AFFILIATES. All rights reserved.
# SPDX-License-Identifier: Apache-2.0
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

%YAML 1.2
---
# GStreamer Video Recorder Configuration - V4L2 Camera Source
# This configuration is for recording video from a V4L2 camera

# Application Configuration
application:
  title: "GStreamer Video Recorder - V4L2 Camera"
  version: "1.0"

# Source Selection
source: "v4l2"  # Options: "pattern" or "v4l2"

# V4L2 Camera Configuration
v4l2:
  device: "/dev/video0"         # V4L2 device path
  pixel_format: "auto"          # Pixel format: "YUYV", "MJPEG", "auto", etc.
  # Note: width, height, framerate are auto-detected from camera
  # If your camera supports multiple resolutions, you may need to set them explicitly

# Recording Configuration
recording:
  filename: "camera_recording.mp4"   # Output file (.mp4 or .mkv)
  framerate: "30/1"                   # Target framerate (use "0/1" for live mode)
  max_buffers: 10                     # Max queued buffers in GStreamer pipeline
  count: 0                            # Frame count limit (0 = unlimited)

# Encoder Configuration
encoder:
  name: "nvh264"                      # Encoder: nvh264, nvh265, x264, x265
  properties:
    # Encoder-specific properties (automatically type-converted)
    # bitrate: "8000"                 # Bitrate in kbps
    # preset: "1"                     # Preset level (0-3 for nvh264enc)
    # gop-size: "30"                  # GOP (Group of Pictures) size
    # qp-min: "10"                    # Minimum quantization parameter
    # qp-max: "51"                    # Maximum quantization parameter

# Notes:
# - V4L2VideoCaptureOp outputs RGBA8888 format after internal conversion
# - Width, height, format, and storage type are auto-detected from camera frames
# - Use --help to see all command-line options
# - Command-line options override YAML settings

